{% extends 'base_generic.html' %} {% load static %}

{% block content %}
<div class="position-relative">
  <!-- Background Image -->
  <img
    src="{% static 'assets/images/background_images/register-page-img.png' %}"
    alt="Landing Image"
    class="img-fluid w-100"
    style="height: 100vh; object-fit: cover"
  >

  <!-- Form Overlay -->
  <div
    class="container position-absolute"
    style="top: 50%; left: 50%; transform: translate(-50%, -50%);"
  >
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <div
          class="p-4"
          style="background: rgba(255, 255, 255, 0.8); border-radius: 10px"
        >
          <h2 class="text-center mb-4">Sign Up</h2>
          <form method="post" class="mt-4" novalidate>
            {% csrf_token %}
            
            <!-- Display non-field-specific errors -->
            {% if form.non_field_errors %}
              <div class="alert alert-danger" role="alert">
                {{ form.non_field_errors }}
              </div>
            {% endif %}
            
            <!-- Username Field -->
            <div class="form-group">
              <label for="{{ form.username.id_for_label }}">Username</label>
              <input
                type="text"
                class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                id="{{ form.username.id_for_label }}"
                name="{{ form.username.name }}"
                placeholder="Choose a username"
                required
                value="{{ form.username.value|default_if_none:'' }}"
              >
              {% for error in form.username.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            
            <!-- First Name Field -->
            <div class="form-group">
              <label for="{{ form.first_name.id_for_label }}">First Name</label>
              <input
                type="text"
                class="form-control {% if form.first_name.errors %}is-invalid{% endif %}"
                id="{{ form.first_name.id_for_label }}"
                name="{{ form.first_name.name }}"
                placeholder="Enter your first name"
                value="{{ form.first_name.value|default_if_none:'' }}"
              >
              {% for error in form.first_name.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Last Name Field -->
            <div class="form-group">
              <label for="{{ form.last_name.id_for_label }}">Last Name</label>
              <input
                type="text"
                class="form-control {% if form.last_name.errors %}is-invalid{% endif %}"
                id="{{ form.last_name.id_for_label }}"
                name="{{ form.last_name.name }}"
                placeholder="Enter your last name"
                value="{{ form.last_name.value|default_if_none:'' }}"
              >
              {% for error in form.last_name.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            
            <!-- Email Field -->
            <div class="form-group">
              <label for="{{ form.email.id_for_label }}">Email</label>
              <input
                type="email"
                class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                id="{{ form.email.id_for_label }}"
                name="{{ form.email.name }}"
                placeholder="Enter your email"
                required
                value="{{ form.email.value|default_if_none:'' }}"
              >
              {% for error in form.email.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            
            <!-- Password Field -->
            <div class="form-group">
              <label for="{{ form.password1.id_for_label }}">Password</label>
              <input
                type="password"
                class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                id="{{ form.password1.id_for_label }}"  
                name="{{ form.password1.name }}"
                placeholder="Choose a password"
                required
              >
              {% for error in form.password1.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
              <small class="form-text text-muted">
                Must be at least 8 characters.
              </small>
              <button
                type="button"
                id="togglePasswordButton"
                onclick="togglePassword()"
                class="btn btn-secondary btn-sm"
              >
                Show Password
              </button>
            </div>

            <!-- Confirm Password Field -->
            <div class="form-group">
              <label for="{{ form.password2.id_for_label }}">Confirm Password</label>
              <input
                type="password"
                class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                id="{{ form.password2.id_for_label }}"  
                name="{{ form.password2.name }}"
                placeholder="Confirm your password"
                required
              >
              {% for error in form.password2.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            
            <!-- Submit Button -->
            <div class="form-group">
              <button type="submit" class="btn btn-info btn-block" id="signup-btn">
                Sign Up
              </button>
            </div>
            
            <!-- Login Redirect -->
            <div class="text-center mt-4">
              <p>
                Already have an account? <a href="{% url 'login' %}">Log In</a>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<script src="{% static 'assets/js/script.js' %}"></script>
{% endblock %}
